(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0631f456"],{"77b8":function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-title"},[s("img",{attrs:{src:a("cc1c"),alt:"",title:""}}),s("span",[t._v("上下分请求")])])}],n=a("54a1"),o=a("702a"),i={components:{vLoading:n.a},data:function(){return{showOperate:!1,allScore:0,gamerNum:0,oddsMoney:0,winnerLose:0,scoreData:[],isLoading:!1,isLoadingPoptip:!1,lowerScoreAll:0,upperScoreAll:0,interval:null,selectItem:{},selectBool:!1,show:!0,auto:null}},beforeRouteEnter:function(t,e,a){a((function(t){o.a.$emit("hiddenShade",!0),t.auto=function(){t.getTotalScore().then((function(){t.handleGetTopData(),t.handleGetPerson(),t.handleGetOddsData(),setTimeout((function(){t.auto&&t.auto()}),3e4)}))},t.auto(),t.getApplyData()}))},beforeRouteLeave:function(t,e,a){this.auto=null,o.a.$emit("hiddenShade",!1),a()},mounted:function(){var t=this;o.a.$on("upperBranch",(function(e){t.scoreData=e.map((function(t){return{header:-1===t.Avatar.indexOf("://")?"/"+t.Avatar:t.Avatar,loginName:t.LoginName,id:t.ID,showId:t.OnlyCode,money:t.Amount,time:t.ApplyTime,status:t.Message,management:t.Management,type:t.ChangeType,balance:t.UserMoney}}))}))},methods:{handleShowDetail:function(t){this.$showPoptip(t,"success",1e3)},handleQuickLogin:function(t,e){var a=this;return new Promise((function(s,n){a.loading||(a.loading=!0,a.axios({url:"/api/Merchant/MerchantLoginApp",params:{name:t,password:e}}).then((function(t){a.isLoading=!1,s()})))}))},handleGetPerson:function(){var t=this;return new Promise((function(e,a){t.$axios({url:"/api/Merchant/GetAllAndOnline"}).then((function(a){if(100===a.data.Status){var s=a.data.Model;t.gamerNum=s.AllCount}e()}))}))},handleMore:function(){this.$router.push({name:"upDownScore"})},handleGetTopData:function(){var t=this;t.$axios({url:"/api/Merchant/GetMerchantInfos"}).then((function(e){if(100===e.data.Status){var a=e.data.Model;t.winnerLose=a.ProLoss,t.allScore=a.AllAmount,t.show=!1,o.a.$emit("hiddenShade",!1)}}))},handleGetOddsData:function(){var t=this;t.$axios({url:"/api/Merchant/GetUnfinished"}).then((function(e){100===e.data.Status&&(t.oddsMoney=e.data.Keyword)}))},getApplyData:function(){var t=this;return new Promise((function(e,a){t.isLoadingPoptip||(t.isLoadingPoptip=!0,t.$axios({url:"/api/Merchant/GetUserApply"}).then((function(a){if(100===a.data.Status){var s=a.data.Data;if(t.scoreData=s.map((function(t){return{header:"/"+t.Avatar,loginName:t.LoginName,id:t.ID,showId:t.OnlyCode,money:t.Amount,balance:t.UserMoney,time:t.ApplyTime,status:t.Message,management:t.Management,type:t.ChangeType}})),t.scoreData.some((function(t){return 3===t.management}))){var n=document.querySelector("#audio-mp3");n.pause(),n.play()}}t.isLoadingPoptip=!1,e()})))}))},getTotalScore:function(){var t=this;return new Promise((function(e,a){t.$axios({url:"/api/Merchant/GetTotalScore"}).then((function(a){if(100===a.data.Status){var s=a.data.Model;t.lowerScoreAll=s.Low,t.upperScoreAll=s.Up,t.show=!1,o.a.$emit("hiddenShade",!1)}e()}))}))},handleOperate:function(t,e){this.selectBool=e,this.selectItem=t,this.showOperate=!0},handleEnter:function(){this.selectBool?this.handleAgree():this.handleRefuse()},handleCancel:function(){this.showOperate=!1},handleAgree:function(){var t=this;t.isLoading||(t.isLoading=!0,t.$axios({url:"/api/Merchant/AgreeOperate",method:"put",params:{id:t.selectItem.id}}).then((function(e){100===e.data.Status&&(t.$showPoptip(e.data.Message,"success",500),t.getApplyData(),t.getTotalScore()),t.isLoading=!1,t.showOperate=!1})))},handleRefuse:function(){var t=this;t.isLoading||(t.isLoading=!0,t.$axios({url:"/api/Merchant/RefuseOperate",method:"put",params:{id:t.selectItem.id}}).then((function(e){100===e.data.Status&&(t.$showPoptip(e.data.Message,"success",500),t.getApplyData(),t.getTotalScore()),t.isLoading=!1,t.showOperate=!1})))}}},c=(a("7885"),a("623f")),l=Object(c.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"top"},[s("div",{staticClass:"top-item"},[s("p",{staticClass:"top-item-top"},[t._v(t._s(t.allScore||"0.0"))]),s("p",{staticClass:"top-item-bo"},[t._v("玩家积分")])]),s("div",{staticClass:"top-item"},[s("p",{staticClass:"top-item-top"},[t._v(t._s(t.gamerNum))]),s("p",{staticClass:"top-item-bo"},[t._v("玩家数量")])]),s("div",{staticClass:"top-item"},[s("p",{staticClass:"top-item-top"},[t._v(t._s(t.oddsMoney||"0.0"))]),s("p",{staticClass:"top-item-bo"},[t._v("未结金额")])]),s("div",{staticClass:"top-item"},[s("p",{staticClass:"top-item-top"},[t._v(t._s(t.winnerLose||"0.0"))]),s("p",{staticClass:"top-item-bo",staticStyle:{color:"red"}},[t._v("今日得分")])])]),s("div",{staticClass:"center"},[s("div",{staticClass:"top-item",staticStyle:{"background-color":"#009688"}},[s("p",{staticClass:"top-item-bo",staticStyle:{color:"#fff"}},[t._v("今日上分（合计）")]),s("p",{staticClass:"top-item-top",staticStyle:{color:"#fff"}},[t._v(t._s(t.upperScoreAll||"0.0"))])]),s("div",{staticClass:"top-item",staticStyle:{"background-color":"#009688"}},[s("p",{staticClass:"top-item-bo",staticStyle:{color:"#fff"}},[t._v("今日下分（合计）")]),s("p",{staticClass:"top-item-top",staticStyle:{color:"#fff"}},[t._v(t._s(t.lowerScoreAll||"0.0"))])])]),s("div",{staticClass:"bottom"},[s("div",{staticClass:"bottom-header"},[t._m(0),s("div",{staticClass:"header-more",on:{click:t.handleMore}},[s("span",[t._v("更多记录")]),s("img",{attrs:{src:a("eade"),alt:"",title:""}})])]),s("div",{staticClass:"bottom-content"},[t._l(t.scoreData,(function(e,a){return[s("div",{key:a,staticClass:"content-item"},[s("div",{staticClass:"item-title"},[s("span",[t._v("玩家")]),s("span",[t._v("ID")]),s("span",[t._v("当前余额")]),s("span",[t._v(t._s(1===e.type?"上分":"下分"))])]),s("div",{staticClass:"item-value"},[s("span",{on:{click:function(a){return t.handleShowDetail(e.loginName)}}},[t._v(t._s(e.loginName))]),s("span",[t._v(t._s(e.showId))]),s("span",[t._v(t._s(e.balance))]),s("span",{style:{color:1===e.type?"#47a347":"#ff1d1d"}},[t._v(t._s(e.money.match(/\d/g).join("")))])]),s("div",{staticClass:"item-operate"},[s("span",[t._v(t._s("时间："+e.time))]),s("div",{staticClass:"operate-c"},[3===e.management?[s("span",{staticClass:"agree",on:{click:function(a){return t.handleOperate(e,!0)}}},[t._v("同意")]),s("span",{staticClass:"refuse",on:{click:function(a){return t.handleOperate(e,!1)}}},[t._v("拒绝")])]:t._e(),3!==e.management?[s("p",[t._v(t._s(e.status))])]:t._e()],2)])])]}))],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showOperate,expression:"showOperate"}],staticClass:"big-img-shade"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-title"},[t._v(t._s(t.selectBool?"同意提示":"拒绝提示"))]),s("p",[t._v(t._s("确定要"+(t.selectBool?"给":"拒绝")+"玩家 ["+t.selectItem.loginName+"] ID ["+t.selectItem.showId+"] ["+t.selectItem.money+"] 吗？"))]),s("div",{staticClass:"button-list"},[s("span",{on:{click:t.handleEnter}},[t._v("确定")]),s("span",{on:{click:t.handleCancel}},[t._v("取消")])])])])])}),s,!1,null,null,null);e.default=l.exports},7885:function(t,e,a){"use strict";var s=a("c90c");a.n(s).a},c90c:function(t,e,a){},cc1c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAAAAAB535iiAAAA5UlEQVQYGQXBEQLEMBAAwH3t8mq4Gi5Hy9Fq+bRcjobnZgIAABAAAIAArNlbtXMuQIB9VfVrzjNzLBDwtro3cLd6IfBV3wB2zxfBqmPDuhbotQhGbdgzrwW7nYRVE77KzPzBk0u4a8OZ4xvZQJvCeYIjLz5gHEK7wJXZJ2CW0CZwV2a94EmhTYDfmQXuJvQT3CcqPzgP4SrQ8niurA3tEnY+8FZm1gO/fAWjgDufDfs4CXZ1sMeCPeoj8GYHYI/6IeDNeoD9tvpBgDUyx3zu0bIvEIBv9so65gcIAABAAAAAAgAA8AdD4wZp1qTqYwAAAABJRU5ErkJggg=="},eade:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATBAMAAABW2/GaAAAAKlBMVEX////MzMzPz8/r6+vy8vLm5ubo6Oj8/Pzj4+Pc3Nz19fXZ2dnv7+/f3993JgmrAAAAPklEQVQI12NgwAemQKjAA2CKVRjCNUwAUyyiEK5jAJjikoZQugUgyqkdrEQDLGbUACLZ1MCcJAMQyT4ZyRoAglkGxB4v7fkAAAAASUVORK5CYII="}}]);