(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d0f4dd3"],{"013f":function(e,t,a){var s=a("4ce5"),n=a("224c"),r=a("008a"),i=a("eafa"),o=a("5dd2");e.exports=function(e,t){var a=1==e,u=2==e,c=3==e,l=4==e,d=6==e,p=5==e||d,h=t||o;return function(t,o,m){for(var f,g,v=r(t),A=n(v),w=s(o,m,3),y=i(A.length),D=0,_=a?h(t,y):u?h(t,0):void 0;D<y;D++)if((p||D in A)&&(g=w(f=A[D],D,v),e))if(a)_[D]=g;else if(g)switch(e){case 3:return!0;case 5:return f;case 6:return D;case 2:_.push(f)}else if(l)return!1;return d?-1:c||l?l:_}}},2346:function(e,t,a){var s=a("75c4");e.exports=Array.isArray||function(e){return"Array"==s(e)}},"2f3c":function(e,t,a){"use strict";a.r(t);var s=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"operate-title"},[t("img",{attrs:{src:a("4d01"),alt:"",title:""}}),t("span",[this._v("手动上下分")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"record-header"},[t("div",{staticClass:"header-title"},[t("img",{attrs:{src:a("cc1c"),alt:"",title:""}}),t("span",[this._v("上下分记录")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"record-c-title"},[a("span",[e._v("玩家")]),a("span",[e._v("上分/下分")]),a("span",[e._v("申请时间")]),a("span",[e._v("结果")]),a("span",[e._v("备注")])])}],n=(a("f548"),a("e697"),{components:{loading:a("54a1").a},data:function(){return{noMoreData:!1,flush:{start:0,end:0,isFlushing:!1,isEnd:!1},username:"",userId:"",selectType:"1",money:"",showOperate:!1,remark:"",isUDLoading:!1,recordsList:[],page:{pageNum:0,pageSize:10,total:0},userList:[]}},mounted:function(){this.getUserList(),this.handleGetData()},computed:{_username:function(){var e=this;return e.username?e.userList.find((function(t){return t.id==e.username})).title:""}},methods:{getUserList:function(){var e=this;e.isLoading||(e.isLoading=!0,e.$axios({url:"/api/Setup/GetUpDownUserList",params:{status:!0}}).then((function(t){if(100===t.data.Status){var a=t.data.Data;e.userList=a.map((function(e){return{title:e.NickName+"("+e.OnlyCode+")",id:e.UserID}}))}e.isLoading=!1})))},handleScroll:function(e){var t=this;e.target.scrollTop+e.target.clientHeight===e.target.scrollHeight&&(t.moreData=!0,setTimeout((function(){t.$refs.list.scrollTop+=25,t.handleGetData()}),20))},handleTouchEnd:function(e){var t=this;t.flush.isEnd=!0,100<t.flush.end-t.flush.start&&0===t.$refs.list.scrollTop?(t.userList=[],t.noMoreData=!1,t.page.pageNum=0,t.handleGetData()):e.target.scrollTop+e.target.clientHeight===e.target.scrollHeight&&t.flush.end-t.flush.start<-100?setTimeout((function(){t.$refs.list.scrollTop+=25,t.handleGetData()}),20):(t.flush.end=t.flush.start,t.flush.isFlushing=!1)},handleTouchMove:function(e){this.flush.end=e.changedTouches[0].pageY},handleTouchStart:function(e){var t=this;t.flush.start=e.targetTouches[0].pageY,t.flush.end=t.flush.start,t.flush.isFlushing=!0,t.flush.isEnd=!1},handleVerify:function(e){e.data&&!e.data.replace(/\D/g,"")&&(this.money=this.money.substring(0,this.money.length-1))},handleShowRemark:function(e){this.$showPoptip(e,"success",1500)},handleOperate:function(){var e=this;e.username.trim()?e.money<=0?e.$showPoptip("请输入正确的金额","error",500):e.showOperate=!0:e.$showPoptip("请输入账号","error",500)},handleEnter:function(){"1"==this.selectType?this.handleUpScore():this.handleDownScore()},handleCancel:function(){this.showOperate=!1},handleUpScore:function(){var e=this;e.remark?e.isUDLoading||(e.isUDLoading=!0,e.$axios({url:"/api/Setup/ManualUpper",method:"put",params:{userId:e.username,branch:e.money,remark:e.remark}}).then((function(t){100===t.data.Status?e.$showPoptip(t.data.Message,"success",500):e.$showPoptip(t.data.Message,"error",500),e.showOperate=!1,e.username="",e.money="",e.remark="",e.isUDLoading=!1,e.page.pageNum=0,e.noMoreData=!1,e.handleGetData()}))):e.$showPoptip("请输入备注信息")},handleDownScore:function(){var e=this;e.isUDLoading||(e.isUDLoading=!0,e.$axios({url:"/api/Setup/ManualLower",method:"put",params:{userId:e.username,branch:e.money,remark:e.remark}}).then((function(t){100===t.data.Status?e.$showPoptip(t.data.Message,"success",500):e.$showPoptip(t.data.Message,"error",500),e.showOperate=!1,e.username="",e.money="",e.remark="",e.isUDLoading=!1,e.page.pageNum=0,e.noMoreData=!1,e.handleGetData()})))},handleGetData:function(){var e=this,t={};return new Promise((function(a,s){e.page.pageNum++,t.startTime=(new Date).pattern("yyyy-MM-dd")+" 00:00",t.endTime=(new Date).pattern("yyyy-MM-dd")+" 23:59",t.start=e.page.pageNum,t.pageSize=e.page.pageSize,e.isUDLoading||e.noMoreData||(e.isUDLoading=!0,1===e.page.pageNum&&(e.recordsList=[]),e.$axios({url:"/api/Setup/GetIntegralRecord",params:t}).then((function(t){if(100===t.data.Status){var s=t.data.Data;e.page.total=t.data.Total,e.recordsList=e.recordsList.concat(s.map((function(e){return{id:e.ID,nickname:e.NickName,loginName:e.LoginName,money:e.Amount,time:e.ApplyTime,status:e.OrderStatus,operate:e.Management,remark:e.Remark}}))),e.page.total<e.page.pageSize*e.page.pageNum&&(e.noMoreData=!0)}e.isUDLoading=!1,e.flush.isFlushing=!1,a()}))),e.noMoreData&&(e.flush.isFlushing=!1)}))}}}),r=(a("c1fb"),a("623f")),i=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"up-down-score"},[a("div",{staticClass:"up-down-operate"},[e._m(0),a("div",{staticClass:"operate-content"},[a("span",{staticStyle:{width:"1.2rem"}},[e._v("用户名")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.username=t.target.multiple?a:a[0]}}},e._l(e.userList,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(e._s(t.title))])})),0),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectType,expression:"selectType"}],staticClass:"type",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[e._v("上分")]),a("option",{attrs:{value:"2"}},[e._v("下分")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.money,expression:"money"}],staticClass:"money",attrs:{placeholder:"上下分金额"},domProps:{value:e.money},on:{input:[function(t){t.target.composing||(e.money=t.target.value)},function(t){return e.handleVerify(t)}]}}),a("span",{staticClass:"enter",on:{click:e.handleOperate}},[e._v("确定")])])]),a("div",{staticClass:"record"},[e._m(1),a("div",{staticClass:"record-content"},[e._m(2),a("div",{ref:"list",staticClass:"user-content",on:{touchstart:function(t){return t.stopPropagation(),e.handleTouchStart(t)},touchmove:function(t){return t.stopPropagation(),e.handleTouchMove(t)},touchend:function(t){return t.stopPropagation(),e.handleTouchEnd(t)}}},[e._l(e.recordsList,(function(t){return[a("div",{key:t.id,staticClass:"record-item"},[a("span",[e._v(e._s(t.nickname||t.loginName))]),a("span",[e._v(e._s(t.money))]),a("span",[e._v(e._s(new Date(t.time.replace(/\-/g,"/")).pattern("MM-dd HH:mm")))]),a("span",[e._v(e._s("申请上分"===t.status||"申请下分"===t.status?t.remark:t.status))]),a("span",{on:{click:function(a){return e.handleShowRemark(t.remark)}}},[e._v(e._s("申请上分"===t.status||"申请下分"===t.status?t.status:t.remark))])])]})),a("loading",{attrs:{isShow:e.isUDLoading&&e.flush.end>=e.flush.start}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.flush.end<e.flush.start&&e.flush.isFlushing,expression:"flush.end < flush.start && flush.isFlushing"}],staticClass:"flush-item flush-up"},[a("div",{staticClass:"downwrap-content"},[a("p",{class:["downwrap-progress",e.noMoreData?"":"rotate-progress"]}),a("p",{staticClass:"downwrap-tips"},[e._v(e._s(e.noMoreData?"没有更多数据":"加载中"))])])])],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showOperate,expression:"showOperate"}],staticClass:"big-img-shade"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-title"},[e._v(e._s(1==e.selectType?"上分提示":"下分提示"))]),a("p",[e._v(e._s("确定要给玩家 ["+e._username+"] ["+(1==e.selectType?"上分":"下分")+e.money+"] 吗？"))]),a("div",{staticClass:"remark"},[a("span",[e._v("备注：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],attrs:{placeholder:"备注信息"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}})]),a("div",{staticClass:"button-list"},[a("span",{on:{click:e.handleEnter}},[e._v("确定")]),a("span",{on:{click:e.handleCancel}},[e._v("取消")])])])])])}),s,!1,null,null,null);t.default=i.exports},"4d01":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAAAAADFQYt8AAAA4klEQVQYGQXBgQDEMAwAwDhFIAIFmEAFJlCBARRgAhN4gQkMoAIVuL8LAABAANbsrdo5FyDAvqr6NeeZORYIeFvdG7hbvRD4qm8Au+eLYNWxYV0L9FoEozbsmdeC3U7CqglfZWb+4Mkl3LXhzPGNbKBN4TzBkRcfMA6hXeDK7BMwS2gTuCuzXvCk0CbA78wCdxP6Ce4TlR+ch3AVaHk8V9aGdgk7H3grM+uBX76CUcCdz4Z9nAS7OthjwR71EXizA7BH/RDwZj3Aflv9IMAamWM+92jZFwjAN3tlHfMDBAAA4A8V46fWZw3uPQAAAABJRU5ErkJggg=="},"5dd2":function(e,t,a){var s=a("81dc");e.exports=function(e,t){return new(s(e))(t)}},"72a5":function(e,t,a){},"81dc":function(e,t,a){var s=a("fb68"),n=a("2346"),r=a("cb3d")("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),s(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},c1fb:function(e,t,a){"use strict";var s=a("72a5");a.n(s).a},cc1c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAaCAAAAAB535iiAAAA5UlEQVQYGQXBEQLEMBAAwH3t8mq4Gi5Hy9Fq+bRcjobnZgIAABAAAIAArNlbtXMuQIB9VfVrzjNzLBDwtro3cLd6IfBV3wB2zxfBqmPDuhbotQhGbdgzrwW7nYRVE77KzPzBk0u4a8OZ4xvZQJvCeYIjLz5gHEK7wJXZJ2CW0CZwV2a94EmhTYDfmQXuJvQT3CcqPzgP4SrQ8niurA3tEnY+8FZm1gO/fAWjgDufDfs4CXZ1sMeCPeoj8GYHYI/6IeDNeoD9tvpBgDUyx3zu0bIvEIBv9so65gcIAABAAAAAAgAA8AdD4wZp1qTqYwAAAABJRU5ErkJggg=="},e697:function(e,t,a){"use strict";var s=a("e46b"),n=a("013f")(5),r="find",i=!0;r in[]&&Array(1)[r]((function(){i=!1})),s(s.P+s.F*i,"Array",{find:function(e,t){return n(this,e,1<arguments.length?t:void 0)}}),a("0e8b")(r)}}]);