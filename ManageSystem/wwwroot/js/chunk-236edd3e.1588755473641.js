(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-236edd3e"],{"119c":function(e,t,i){"use strict";var a=i("b6f1");e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},2616:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"base-setting"},[i("div",{staticClass:"content"},[i("div",{staticClass:"list-header"},[i("div",{staticClass:"list-title"},[i("span",[e._v("各游戏封盘时间设置（以开奖时间为参照）")]),i("div",{staticClass:"operate"},[i("span",{staticStyle:{"vertical-align":"middle"},on:{click:function(t){return e.handleOperate(1)}}},[e._v("修改/保存")])])])]),i("div",{staticClass:"list"},[e._m(0),e._l(e.gameList,function(t,a){return[t.gameType==e.selectGameTimeType?i("div",{key:a,staticClass:"list-item"},[i("div",[e._v(e._s(t.name))]),i("div",[i("InputNumber",{staticClass:"base-item-input",attrs:{max:120,min:1},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1),i("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","background-color":"#e4e4e4"},domProps:{textContent:e._s(t.countDownText)}})]):e._e()]})],2)]),i("div",{staticClass:"content"},[i("div",{staticClass:"list-header"},[i("div",{staticClass:"list-title"},[i("span",[e._v("系统消息设置")]),i("div",{staticClass:"operate"},[i("span",{on:{click:function(t){return e.handleOperate(2)}}},[e._v("修改/保存")])])])]),i("div",{staticClass:"list-1"},[i("div",{staticClass:"base-list-item"},[i("div",{staticClass:"base-item-second"},[i("span",[e._v("封盘前")]),i("InputNumber",{staticClass:"base-item-input",attrs:{max:120,min:1},model:{value:e.beforeSealingSecond,callback:function(t){e.beforeSealingSecond=t},expression:"beforeSealingSecond"}}),i("span",[e._v("秒")]),i("Checkbox",{staticClass:"system-operate-item",model:{value:e.before50.show,callback:function(t){e.$set(e.before50,"show",t)},expression:"before50.show"}},[i("span",[e._v(e._s(e.before50.title))])])],1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.beforeSealing,expression:"beforeSealing"}],domProps:{value:e.beforeSealing},on:{input:function(t){t.target.composing||(e.beforeSealing=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[e._m(1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.afterSealing1,expression:"afterSealing1"}],domProps:{value:e.afterSealing1},on:{input:function(t){t.target.composing||(e.afterSealing1=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[i("div",{staticClass:"base-item-second"},[i("span",[e._v("封盘后")]),i("InputNumber",{staticClass:"base-item-input",attrs:{max:120,min:1},model:{value:e.afterSealing2Second,callback:function(t){e.afterSealing2Second=t},expression:"afterSealing2Second"}}),i("span",[e._v("秒自定义")])],1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.afterSealing2,expression:"afterSealing2"}],domProps:{value:e.afterSealing2},on:{input:function(t){t.target.composing||(e.afterSealing2=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[i("div",{staticClass:"base-item-second space-between"},[i("span",[e._v("中奖明细")]),i("div",{staticClass:"space-right"},[i("div",{staticClass:"right-item",on:{click:function(t){e.editShow=!0}}},[e._v("{结算时中奖格式}")]),i("div",{staticClass:"right-item",on:{click:function(t){e.editShowNot=!0}}},[e._v("{结算时未中奖格式}")])])]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.winningDetails,expression:"winningDetails"}],domProps:{value:e.winningDetails},on:{input:function(t){t.target.composing||(e.winningDetails=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[i("div",{staticClass:"base-item-second space-between"},[i("span",[e._v("会员积分")]),i("Checkbox",{staticClass:"system-operate-item",model:{value:e.showBillTable,callback:function(t){e.showBillTable=t},expression:"showBillTable"}},[i("span",[e._v("使用表单显示余额")])])],1),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.membershipScore,expression:"membershipScore"}],domProps:{value:e.membershipScore},on:{input:function(t){t.target.composing||(e.membershipScore=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[i("p",{staticClass:"base-item-second"},[e._v("封盘提示")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sealingTips,expression:"sealingTips"}],domProps:{value:e.sealingTips},on:{input:function(t){t.target.composing||(e.sealingTips=t.target.value)}}})]),i("div",{staticClass:"base-list-item"},[i("p",{staticClass:"base-item-second"},[e._v("系统消息可用变量说明")]),e._l(e.poptips,function(t,a){return i("div",{key:a,staticClass:"poptip-item"},[i("span",{domProps:{textContent:e._s(t.title)}}),i("span",{domProps:{textContent:e._s(t.desc)}})])})],2)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.editShow||e.editShowNot,expression:"editShow || editShowNot"}],staticClass:"article-mask"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.editShow||e.editShowNot,expression:"editShow || editShowNot"}],staticClass:"article-content"},[i("div",{staticClass:"article-header"},[i("span",[e._v("{结算} 格式内容设置")]),i("span",{staticClass:"modal-close",on:{click:function(t){e.editShow=!1,e.editShowNot=!1}}},[e._v("X")])]),i("div",{staticClass:"article-list"},[e.editShow?i("i-input",{staticClass:"column-textarea",attrs:{type:"textarea",rows:4,autosize:{minRows:4,maxRows:4}},model:{value:e.Settlement,callback:function(t){e.Settlement=t},expression:"Settlement"}}):e._e(),e.editShowNot?i("i-input",{staticClass:"column-textarea",attrs:{type:"textarea",rows:4,autosize:{minRows:4,maxRows:4}},model:{value:e.NotSettlement,callback:function(t){e.NotSettlement=t},expression:"NotSettlement"}}):e._e(),i("p",{staticStyle:{padding:"4px 0"},domProps:{textContent:e._s(e.editShowNot?"支持变量： {玩家}{当期盈亏}":"支持变量： {玩家}{当期盈亏}{中奖详细}")}}),i("div",{staticClass:"article-item",on:{click:function(t){return e.handleSave(e.editShow?"3":"4")}}},[e._v("确定")])],1)])]),i("loading",{attrs:{loading:e.isLoading}}),i("div",{staticStyle:{margin:"20px 0"}},[i("router-view")],1)],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"list-item"},[i("div",[e._v("彩种")]),i("div",[e._v("距开奖*秒")]),i("div",{staticStyle:{"background-color":"#e4e4e4","font-size":"13px","word-break":"keep-all"}},[e._v("当前封盘倒计时")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"base-item-second"},[i("span",[e._v("封盘信息核对")])])}],s=(i("608b"),i("7364"),i("b745"),i("f763"),i("cde0"),i("702a")),o={data:function(){return{poptips:[{title:"封盘前提示可用变量",desc:"{期号}{游戏}"},{title:"封盘核对可用变量",desc:"{期号}{游戏}{玩家数量}{玩家总分}{核对}"},{title:"中奖明细可用变量",desc:"{期号}{游戏}{开奖信息}{在线人数}{玩家数量}{玩家总分}{当期期号}{结算记录}{中奖记录}{中奖}{结算}"},{title:"会员积分可用变量",desc:"{微群名字}{在线人数}{玩家数量}{玩家总分}{账单内容}"},{title:"封盘后自定义消息",desc:"无可用变量"}],selectGameTimeType:"lottery",selectGameMesType:"lottery",editShow:!1,editShowNot:!1,gameType:[{value:"lottery",title:"彩票游戏设置"},{value:"video",title:"视讯游戏设置"}],gameList:[],sealingTips:"",winningDetails:"",membershipScore:"",beforeSealing:"",beforeSealingSecond:0,afterSealing1:"",afterSealing1Second:0,afterSealing2:"",afterSealing2Second:0,Settlement:"",NotSettlement:"",isLoading:!1,showBillTable:!1,id:"",before50:{show:!1,title:"禁止撤单"},interval2:null,startTime:0,endTime:0}},mounted:function(){s["a"].$on("BackstageGameInfo",function(t){if("string"==typeof t&&(t=JSON.parse(t)),e.gameList.length){var i=e.gameList.findIndex(function(e){return e.type==t.GameType&&"lottery"==e.gameType}),a=e.gameList[i];e.gameList.splice(i,1,Object.assign({},a,{countDown:t.Surplus})),console.log(e.gameList)}}),s["a"].$on("endReConnect",function(){e.lotterySignalr.changeBaseSetting()});var e=this;e.getGameList().then(function(){e.lotterySignalr.changeBaseSetting(),e.getData()}),e.interval2||(e.interval2=setInterval(function(){e.countDown()},1e3-(e.endTime-e.startTime)))},methods:{handleChangeTimeType:function(e){console.log(e)},countDown:function(){var e=this;e.startTime=+new Date,e.gameList.forEach(function(e){e.countDown>0?(e.countDown--,e.countDownText=("00"+parseInt(e.countDown/60)).slice(-2)+":"+("00"+(e.countDown%60).toFixed(0)).slice(-2)):e.countDownText="0"}),e.endTime=+new Date},handleChangeMesType:function(e){var t=this;console.log(e,t.selectGameMesType),t.getData()},getGameList:function(){var e=this;return new Promise(function(t,i){e.$axios({url:"/api/Merchant/GetGameList"}).then(function(a){if(100===a.data.Status){var n=a.data.Data;e.gameList=n.map(function(e){return{name:e.GameName,type:e.GameType,key:e.NickName,value:0,gameType:"lottery",countDown:0,countDownText:""}}).sort(function(e,t){return e.type-t.type}),t()}i()})})},handleOperate:function(e){var t=this;switch(e){case 1:t.handleSave(e);break;case 2:t.handleSave(e);break}},handleSave:function(e){var t=this,i=!1,a={},n="";t.afterSealing2||2!==e?t.afterSealing2Second||2!==e?t.afterSealing1||2!==e?t.beforeSealing||2!==e?t.beforeSealingSecond||2!==e?t.sealingTips||2!==e?t.winningDetails||2!==e?t.membershipScore||2!==e?t.Settlement?t.NotSettlement?(t.gameList.forEach(function(a){a.value||1!==e||i||"lottery"!=a.gameType||(i=!0,t.$Message.error("请填写".concat(a.name,"封盘时间")))}),i||(a["ID"]=t.id,a["CustomMsg"]=t.afterSealing2,a["CustomTime"]=t.afterSealing2Second,a["EntertainedAfterMsg"]=t.afterSealing1,a["EntertainedFrontMsg"]=t.beforeSealing,a["EntertainedFrontTime"]=t.beforeSealingSecond,a["LotteryFrontMsg"]=t.sealingTips,a["MembershipScore"]=t.membershipScore,a["WinningDetails"]=t.winningDetails,a["ProhibitChe"]=t.before50.show,a["ShowBillTable"]=t.showBillTable,a["Settlement"]=t.Settlement,a["NotSettlement"]=t.NotSettlement,a["LotteryFrontTime"]=[],t.gameList.forEach(function(e){"bjl"!=e.key&&a["LotteryFrontTime"].push({Type:e.type,LotteryTime:e.value})}),t.isLoading||(t.isLoading=!0,n="lottery"==t.selectGameMesType?"/api/Merchant/UpdateSetupInfo":"/api/Merchant/UpdateVideoSetupInfo",t.$axios({url:n,method:"post",data:a}).then(function(e){t.isLoading=!1,t.editShow=!1,t.editShowNot=!1,100===e.data.Status?(t.$Message.success(e.data.Message),t.getData()):t.$Message.error(e.data.Message)})))):t.$Message.error("请填写{未中奖格式}内容"):t.$Message.error("请填写{中奖格式}内容"):t.$Message.error("请填写会员积分消息"):t.$Message.error("请填写中奖提示消息"):t.$Message.error("请填写封盘提示"):t.$Message.error("请填写自定义封盘前时间"):t.$Message.error("请填写自定义封盘前消息"):t.$Message.error("请填写封盘后核对消息"):t.$Message.error("请填写自定义封盘后时间"):t.$Message.error("请填写自定义封盘后消息")},getData:function(){var e=this,t="";e.isLoading||(e.isLoading=!0,t="lottery"==e.selectGameMesType?"/api/Merchant/GetSetupInfo":"/api/Merchant/GetVideoSetupInfo",e.$axios({url:t}).then(function(t){if(100===t.data.Status){var i=t.data.Model;e.afterSealing2=i.CustomMsg,e.afterSealing2Second=i.CustomTime,e.Settlement=i.Settlement,e.NotSettlement=i.NotSettlement,e.afterSealing1=i.EntertainedAfterMsg,e.beforeSealing=i.EntertainedFrontMsg,e.beforeSealingSecond=i.EntertainedFrontTime,e.sealingTips=i.LotteryFrontMsg,e.winningDetails=i.WinningDetails,e.membershipScore=i.MembershipScore,e.before50.show=i.ProhibitChe,e.showBillTable=i.ShowBillTable,i.LotteryFrontTime&&e.gameList.forEach(function(e){var t=i.LotteryFrontTime.find(function(t){return t.Type==e.type});t&&(e.value=t.LotteryTime)}),e.id=i.ID,e.canEdit1=!1,e.canEdit2=!1}e.isLoading=!1}))}}},r=o,l=(i("9ab3"),i("6691")),c=Object(l["a"])(r,a,n,!1,null,"1da13e00",null);t["default"]=c.exports},"2d43":function(e,t,i){var a=i("01f5"),n=i("6462"),s=i("db4b"),o=i("b146"),r=i("5824");e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,d=4==e,u=6==e,m=5==e||u,f=t||r;return function(t,r,p){for(var g,v,S=s(t),h=n(S),b=a(r,p,3),w=o(h.length),y=0,T=i?f(t,w):l?f(t,0):void 0;w>y;y++)if((m||y in h)&&(g=h[y],v=b(g,y,S),e))if(i)T[y]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return y;case 2:T.push(g)}else if(d)return!1;return u?-1:c||d?d:T}}},5824:function(e,t,i){var a=i("f691");e.exports=function(e,t){return new(a(e))(t)}},"608b":function(e,t,i){"use strict";var a=i("b2f5"),n=i("2d43")(5),s="find",o=!0;s in[]&&Array(1)[s](function(){o=!1}),a(a.P+a.F*o,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("644a")(s)},7364:function(e,t,i){var a=i("ddf7").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,o="name";o in n||i("dad2")&&a(n,o,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},"9ab3":function(e,t,i){"use strict";var a=i("a48b"),n=i.n(a);n.a},a48b:function(e,t,i){},b5b8:function(e,t,i){var a=i("94ac");e.exports=Array.isArray||function(e){return"Array"==a(e)}},b745:function(e,t,i){"use strict";var a=i("b2f5"),n=i("648a"),s=i("db4b"),o=i("b6f1"),r=[].sort,l=[1,2,3];a(a.P+a.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!i("119c")(r)),"Array",{sort:function(e){return void 0===e?r.call(s(this)):r.call(s(this),n(e))}})},cde0:function(e,t,i){"use strict";var a=i("b2f5"),n=i("2d43")(6),s="findIndex",o=!0;s in[]&&Array(1)[s](function(){o=!1}),a(a.P+a.F*o,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("644a")(s)},f691:function(e,t,i){var a=i("88dd"),n=i("b5b8"),s=i("8b37")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),a(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?Array:t}},f763:function(e,t,i){for(var a=i("dac5"),n=i("cfc7"),s=i("e5ef"),o=i("3754"),r=i("743d"),l=i("14fc"),c=i("8b37"),d=c("iterator"),u=c("toStringTag"),m=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=n(f),g=0;g<p.length;g++){var v,S=p[g],h=f[S],b=o[S],w=b&&b.prototype;if(w&&(w[d]||r(w,d,m),w[u]||r(w,u,S),l[S]=m,h))for(v in a)w[v]||s(w,v,a[v],!0)}}}]);
//# sourceMappingURL=chunk-236edd3e.1588755473641.js.map